{"version":3,"file":"TheUserTodos.d1b82a78.js","sources":["../../src/components/todos/TodoItem.jsx","../../src/pages/modules/TheUserTodos.jsx"],"sourcesContent":["import { subStringLength, parsedNumberId } from './../../extend/HelpersDom';\r\n\r\nexport default function TodoItem({item, callback}) {\r\n   const {id, title, completed } = item;\r\n   \r\n   const handleOnClick = () => callback(id, completed);\r\n   \r\n   return <div className=\"col-sm-12 col-md-6 col-lg\">\r\n             <div className=\"h-100 card border-0 mt-2\">\r\n                <header className=\"mt-4 card-header rounded border d-flex justify-content-between align-items-center\">\r\n                  <div className=\"text-initial\">\r\n                      { subStringLength(title, 15, true) }\r\n                  </div>\r\n                  <div>\r\n                     <button type=\"button\" \r\n                     className={'btn btn-sm ' + (completed ? 'btn-outline-success' : 'btn-outline-danger')}\r\n                        onClick={handleOnClick}>\r\n                        <i className={'align-middle bx ' + (completed ? 'bx-check' : 'bx-x')} ></i>\r\n                     </button>\r\n                  </div>\r\n                </header>\r\n                <div className=\"position-absolute start-0 top-0 border rounded px-1\">\r\n                   { parsedNumberId(id, 4) }\r\n                </div>\r\n             </div> \r\n          </div>\r\n}","import { useState, useEffect } from 'react';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\n\r\nimport TodoItem from './../../components/todos/TodoItem';\r\nimport NotFound from './../../require/NotFound';\r\nimport { UserGetContext } from './../../components/Dynamic';\r\nimport { Loader, InputSearch, BasicPagination  } from './../../components/Reusable';\r\n\r\nimport { getTodosUser } from './../../services/UsersSrv.js';\r\nimport { focusElement, createPagination } from './../../extend/HelpersDom';\r\n\r\nexport default function TheUserTodos () {\r\n   \r\n   const { currentIndex } = UserGetContext();\r\n   \r\n   const [ todos, setTodos ] = useState([]);\r\n   const [ todosFil, setTodosFil ] = useState([]);\r\n\r\n   const [ datPart, setDatPart ] = useState([]);\r\n   const [ datPags, setDatPags ] = useState([]);\r\n   const [ initialPag, setInitialPag ] = useState(0);\r\n\r\n   const [ info, setInfo ] = useState({});\r\n   \r\n   const getCurrentCompleted = (data) => {\r\n      const [ completed, uncompleted ] = data.reduce(([one, two], { completed }) => {\r\n         (completed) ?  one++ : two++;\r\n            return [one, two];\r\n      }, [0, 0]);\r\n      return { completed, uncompleted };\r\n   };\r\n\r\n   const setStatesPagination = (data) => {\r\n      const { dataArray, dataPags } = createPagination(data, 10);\r\n            setDatPart(dataArray);\r\n            setDatPags(dataPags);\r\n            setInitialPag(0);\r\n     return dataArray[0];\r\n   };\r\n\r\n   useEffect(() => {\r\n      (async () => {\r\n         const todosData = await getTodosUser(currentIndex);\r\n               setTodos(todosData);\r\n               setTodosFil(() => setStatesPagination(todosData));\r\n               setInfo(() => getCurrentCompleted(todosData));\r\n\r\n               focusElement('input-default');\r\n      })();\r\n   },[currentIndex]);\r\n\r\n\r\n   const handleTodoItem = (val, sts) => {\r\n      const index = todos.findIndex(({id}) => id === val);\r\n      todos[index].completed = !sts;\r\n      setInfo(() => getCurrentCompleted(todos));\r\n   };\r\n\r\n   const handleInitialPag = (val) => {\r\n      setInitialPag(val);\r\n      setTodosFil(datPart[val]);\r\n   };\r\n\r\n   const handleInputSearch = (val) => {\r\n      setTodosFil(() => {\r\n         const data = todos.filter(({title}) => title.toUpperCase().includes(val));\r\n         return setStatesPagination(data);\r\n      });\r\n   };\r\n\r\n   return <div className=\"position-relative d-flex flex-column rounded min-h-20\">\r\n            { !todos.length ? <Loader message=\"Cargando Todos ...\"/> : \r\n               <>\r\n                  <div className=\"row\">\r\n                     <div className=\"col-sm-12 col-md\">\r\n                        <InputSearch placeholder=\"Buscar Todos ...\" maxlength=\"20\" callback={handleInputSearch}/>\r\n                     </div>\r\n                     <div className=\"mt-3 mt-md-0 col-sm-12 col-md d-flex flex-wrap justify-content-around align-items-center\">\r\n                        <div className=\"fw-bolder border-bottom border-dark dark\">\r\n                           Total : { todos.length }   \r\n                        </div>\r\n                        <div className=\"fw-bolder text-success border-bottom border-success\">\r\n                           <i className=\"bx bx-check align-middle\"></i> { info.completed } \r\n                        </div>\r\n                        <div className=\"fw-bolder text-danger border-bottom border-danger\">\r\n                           <i className=\"bx bx-x align-middle\"></i> { info.uncompleted }\r\n                        </div>\r\n                     </div>\r\n                  </div>\r\n\r\n                  <div className={'min-h-20 d-flex mt-1 flex-column max-h-30 overflow-auto scroll-primary pe-2 ' + \r\n                                (!todosFil.length ? \r\n                                'justify-content-center':'justify-content-start')}>\r\n                     <TransitionGroup className=\"justify-content-center row row-cols-1 row-cols-md-2 row-cols-lg-3 gx-3\">\r\n                       {\r\n                           todosFil.map((elem, id) => <CSSTransition key={id} timeout={800} classNames=\"ani-fadeInUp\">\r\n                                 <TodoItem item={elem} callback={handleTodoItem}/>\r\n                              </CSSTransition> \r\n                             )\r\n                       }\r\n                     </TransitionGroup> \r\n                     <CSSTransition in={!todosFil.length} timeout={900} unmountOnExit classNames=\"ani-fadeInDelay\" exit={false}>\r\n                        <NotFound message=\"Ooops todos no encontrados.\" custom=\"text-center\"/>\r\n                     </CSSTransition>\r\n                  </div>\r\n\r\n                  <div className=\"mt-3\">\r\n                     <BasicPagination currentpag={initialPag} totalpags={datPags.length} callback={handleInitialPag}/>  \r\n                  </div>\r\n               </>   \r\n            }\r\n         </div>\r\n}"],"names":["item","callback","id","title","completed","handleOnClick","subStringLength","parsedNumberId","currentIndex","UserGetContext","todos","setTodos","useState","todosFil","setTodosFil","datPart","setDatPart","datPags","setDatPags","initialPag","setInitialPag","info","setInfo","getCurrentCompleted","data","uncompleted","reduce","one","two","setStatesPagination","dataArray","dataPags","createPagination","todosData","getTodosUser","handleTodoItem","val","sts","index","findIndex","handleInitialPag","handleInputSearch","filter","toUpperCase","includes","length","map","elem"],"mappings":"8WAEiC,CAACA,OAAMC,YAAW,MAC1C,CAACC,KAAIC,QAAOC,aAAcJ,EAE1BK,EAAgB,IAAMJ,EAASC,EAAIE,mBAE7B,UAAU,8CACP,UAAU,iDACJ,UAAU,uGACX,UAAU,wBACTE,EAAgBH,EAAO,GAAI,oCAGtB,KAAK,SACb,UAAW,iBAA6B,sBAAwB,sBAC7D,QAASE,kBACN,UAAW,sBAAkC,WAAa,0BAIhE,UAAU,+DACVE,EAAeL,EAAI,sBCXA,MAE/B,CAAEM,gBAAiBC,IAEnB,CAAEC,EAAOC,GAAaC,mBAAS,IAC/B,CAAEC,EAAUC,GAAgBF,mBAAS,IAErC,CAAEG,EAASC,GAAeJ,mBAAS,IACnC,CAAEK,EAASC,GAAeN,mBAAS,IACnC,CAAEO,EAAYC,GAAkBR,mBAAS,GAEzC,CAAES,EAAMC,GAAYV,mBAAS,IAE7BW,EAAuBC,GAAS,MAC7B,CAAEpB,EAAWqB,GAAgBD,EAAKE,OAAO,CAAC,CAACC,EAAKC,GAAM,CAAExB,kBAC5CuB,IAAQC,IACb,CAACD,EAAKC,IAChB,CAAC,EAAG,UACA,CAAExB,YAAWqB,gBAGjBI,EAAuBL,GAAS,MAC7B,CAAEM,YAAWC,YAAaC,EAAiBR,EAAM,aACtCM,KACAC,KACG,GACdD,EAAU,wBAGT,IAAM,CACZ,UAAY,MACJG,GAAY,KAAMC,GAAa1B,KACtByB,KACG,IAAMJ,EAAoBI,MAC9B,IAAMV,EAAoBU,MAErB,sBAEvB,CAACzB,SAGG2B,GAAiB,CAACC,EAAKC,IAAQ,MAC5BC,GAAQ5B,EAAM6B,UAAU,CAAC,CAACrC,QAAQA,IAAOkC,KACzCE,GAAOlC,UAAY,CAACiC,IAClB,IAAMd,EAAoBb,KAG/B8B,EAAoBJ,GAAQ,GACjBA,KACFrB,EAAQqB,KAGjBK,EAAqBL,GAAQ,GACpB,IAAM,MACTZ,GAAOd,EAAMgC,OAAO,CAAC,CAACvC,WAAWA,EAAMwC,cAAcC,SAASR,UAC7DP,GAAoBL,sBAIrB,UAAU,iEACX,AAACd,EAAMmC,+BAEE,UAAU,yBACP,UAAU,8BACX,GAAY,YAAY,mBAAmB,UAAU,KAAK,SAAUJ,eAEnE,UAAU,8GACP,UAAU,gEACF/B,EAAMmC,mBAEd,UAAU,uEACT,UAAU,iCAAkCxB,EAAKjB,sBAElD,UAAU,qEACT,UAAU,6BAA8BiB,EAAKI,8BAKpD,UAAW,gFACAZ,EAASgC,OACc,wBAAzB,sCACV,GAAgB,UAAU,kFAErBhC,EAASiC,IAAI,CAACC,EAAM7C,MAAQ,GAAuB,QAAS,IAAK,WAAW,0BACrE,GAAS,KAAM6C,EAAM,SAAUZ,KADSjC,QAMpD,GAAc,GAAI,CAACW,EAASgC,OAAQ,QAAS,IAAK,iBAAc,WAAW,kBAAkB,KAAM,cAChG,GAAS,QAAQ,8BAA8B,OAAO,8BAIxD,UAAU,kBACX,GAAgB,WAAY1B,EAAY,UAAWF,EAAQ4B,OAAQ,SAAUL,WApCpE,GAAO,QAAQ"}