{"version":3,"file":"TheUserAlbums.6b875e51.js","sources":["../../src/components/albums/AlbumPhotos.jsx","../../src/components/albums/AlbumCard.jsx","../../src/pages/modules/TheUserAlbums.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\n\r\nimport NotFound from './../../require/NotFound';\r\nimport { Loader, InputSearch, BasicPagination } from './../../components/Reusable';\r\nimport { getAlbumPhotos } from './../../services/UsersSrv.js';\r\nimport { createPagination, subStringLength, parsedNumberId } from './../../extend/HelpersDom';\r\n\r\nconst PhotoBox = ({item}) => {\r\n   const { id, title, url, thumbnailUrl } = item;\r\n\r\n   return <div className=\"col-6 col-sm-12 col-md-6\">\r\n            <div className=\"card card-photo-box h-100 border-primary\">\r\n               <img className=\"rounded\" src={url} loading=\"lazy\" alt={'image_' + id}/>\r\n               <div className=\"card-img-overlay card-photo-box-content p-0 d-flex align-items-end justify-content-end\">\r\n                  <article className=\"p-1 bg-info text-white rounded-start border-start border-top border-primary\">\r\n                     { subStringLength(title, 10) }\r\n                  </article>\r\n                  <div className=\"card-photo-box-intro position-absolute h-100 top-0 start-0 end-0 d-flex justify-content-center align-items-center flex-column\">\r\n                     <small className=\"cpb-text mb-2 text-center fw-bolder rounded p-1 bg-white\">ID : { parsedNumberId(id) }</small>\r\n                     <a href={thumbnailUrl} target=\"_blank\" rel=\"noopener noreferrer\" className=\"cpb-btn btn btn-sm btn-outline-primary\">\r\n                        <i className=\"bx bx-link\"></i>\r\n                     </a>\r\n                  </div>\r\n               </div>\r\n            </div>\r\n          </div>\r\n};\r\n\r\nexport default function AlbumPhotos({data}){\r\n\r\n   const { id , title } = data;\r\n\r\n   const [ photos, setPhotos ] = useState([]);\r\n   const [ photosFil, setPhotosFil ] = useState([]);\r\n   const [ datPart, setDatPart ] = useState([]);\r\n   const [ datPags, setDatPags ] = useState([]);\r\n\r\n   const [ initialPag, setInitialPag ] = useState(0);\r\n\r\n   useEffect(() => {\r\n      //usar async await en use effect hace bugs de montado :l\r\n      getAlbumPhotos(id).then((data) => {\r\n         setPhotos(data);\r\n         \r\n         const { dataArray, dataPags } = createPagination(data);\r\n            setDatPart(dataArray);\r\n            setDatPags(dataPags);\r\n            setInitialPag(0);\r\n\r\n            setPhotosFil(() => dataArray[0]);\r\n\r\n      },(err) => console.error(err.status));\r\n      \r\n      return () => setPhotos([]); //on loading \r\n   }, [id]);\r\n\r\n   const handleInitialPag = (val) => {\r\n      setInitialPag(val);\r\n      setPhotosFil(datPart[val]);\r\n   };\r\n\r\n   const handleInputSearch = (val) => {\r\n      setPhotosFil(() => {\r\n         const data = photos.filter(({title}) => title.toUpperCase().includes(val));\r\n         const { dataArray, dataPags } = createPagination(data);\r\n            setDatPart(dataArray);\r\n            setDatPags(dataPags);\r\n            setInitialPag(0);\r\n\r\n         return dataArray[0];\r\n      });\r\n   };\r\n\r\n   return  !photos.length ? <Loader message=\"Cargando Fotos ...\"/> : \r\n               <>\r\n                  <div className=\"mb-3 rounded border border-primary p-2 d-flex align-items-center\">\r\n                     <div className=\"me-2 text-primary\">\r\n                        <i className=\"mt-1 bx bx-md bx-photo-album\"></i>\r\n                     </div>\r\n                     <div className=\"d-flex flex-column\">\r\n                        <span>- ID : 00{ id }</span>\r\n                        <small className=\"text-uppercase\">- { subStringLength(title, 30, true) }</small>\r\n                     </div>\r\n                  </div>\r\n                  <InputSearch placeholder=\"Buscar fotografia ...\" maxlength=\"15\" callback={handleInputSearch}/>\r\n\r\n                  <div className={'min-h-20 d-flex mt-3 flex-column ' + \r\n                                    (!photosFil.length ? \r\n                                    'justify-content-center':'justify-content-start')}>\r\n                     <TransitionGroup className=\"justify-content-center mb-3 row row-cols-md-1 row-cols-xl-2 g-2\">\r\n                       {\r\n                           photosFil.map((elem, id) => <CSSTransition key={id} timeout={800} classNames=\"ani-fadeInUp\">\r\n                              <PhotoBox item={elem}/>\r\n                           </CSSTransition> )   \r\n                       }\r\n                     </TransitionGroup> \r\n                     <CSSTransition in={!photosFil.length} timeout={900} unmountOnExit classNames=\"ani-fadeInDelay\" exit={false}>\r\n                        <NotFound message=\"Ooops fotos no encontradas.\" custom=\"text-center\"/>\r\n                     </CSSTransition>\r\n                  </div>\r\n                  \r\n                  <BasicPagination currentpag={initialPag} totalpags={datPags.length} callback={handleInitialPag}/>\r\n               </>\r\n}","import { subStringLength } from './../../extend/HelpersDom';\r\n\r\nexport default function AlbumCard({callback, active, item}){\r\n   \r\n   const { id, title } = item;\r\n\r\n   return  <div className=\"col-sm-12 col-md-6 col-lg\">\r\n            <div className={'h-100 card card-album ' + (active && 'active')} \r\n                  onClick={() => callback(item)}>\r\n               <div className=\"card-body flex-column\">\r\n                 <div className=\"border-bottom mb-1\">\r\n                    <i className=\"bx bx-customize\"></i> ID : 00{ id }\r\n                 </div>\r\n                 <div className=\"text-initial\">\r\n                    { subStringLength(title, 20, true) }\r\n                 </div>\r\n               </div>\r\n            </div>\r\n           </div>\r\n}","import { useEffect, useState } from 'react';\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\n\r\nimport AlbumPhotos from './../../components/albums/AlbumPhotos';\r\nimport AlbumCard from './../../components/albums/AlbumCard';\r\nimport NotFound from './../../require/NotFound';\r\nimport { UserGetContext } from './../../components/Dynamic';\r\nimport { Loader, InputSearch } from './../../components/Reusable';\r\n\r\nimport { getAlbumsUser } from './../../services/UsersSrv.js';\r\nimport { focusElement } from './../../extend/HelpersDom';\r\n\r\nexport default function TheUserAlbums () {\r\n   const { currentIndex } = UserGetContext();\r\n   \r\n   const [ albums, setAlbums ] = useState([]);\r\n   const [ albumsFil, setAlbumsFil ] = useState([]);\r\n   const [ dataActive, setDataActive ] = useState({});\r\n\r\n   const [ openModal, setOpenModal ] = useState(false);\r\n\r\n   useEffect( () => {\r\n      (async () => {\r\n         const albumsData = await getAlbumsUser(currentIndex);\r\n            setAlbums(albumsData);\r\n            setAlbumsFil(albumsData);\r\n            setDataActive(albumsData[0]);\r\n\r\n            focusElement('input-default');\r\n      })();\r\n   }, [currentIndex]);\r\n\r\n   const handleInputSearch = (val) => {\r\n      setAlbumsFil(() => albums.filter(({title}) => title.toUpperCase().includes(val)));\r\n   };\r\n   const handleClickAlbumCard = (val) => setDataActive(val);\r\n\r\n   return <div className=\"position-relative d-flex flex-column rounded min-h-20\">\r\n\r\n       { !albums.length ? <Loader message=\"Cargando Albums ...\"/> : \r\n            // Albums content\r\n            <>\r\n               <div className=\"row position-relative\">\r\n                  <div className=\"col-md-12 col-lg-7\">\r\n                    <InputSearch placeholder=\"Buscar Albums ...\" maxlength=\"20\" callback={handleInputSearch}/>\r\n\r\n                     <div className={'App-section d-flex mt-3 flex-column max-h-30 overflow-auto scroll-primary pe-2 ' + \r\n                                      (!albumsFil.length ? \r\n                                      'justify-content-center':'justify-content-start')}>\r\n                        <TransitionGroup className=\"justify-content-center row  row-cols-md-1 row-cols-lg-2 row-cols-xl-3 g-3\">\r\n                          {\r\n                              albumsFil.map(({id,title}) => <CSSTransition key={id} timeout={800} classNames=\"ani-fadeInUp\">\r\n                                    <AlbumCard item={{id, title}} callback={handleClickAlbumCard} active={id === dataActive.id}/>\r\n                                 </CSSTransition> \r\n                                )                  \r\n                          }\r\n                        </TransitionGroup> \r\n                        <CSSTransition in={!albumsFil.length} timeout={900} unmountOnExit classNames=\"ani-fadeInDelay\" exit={false}>\r\n                           <NotFound message=\"Ooops albums no encontrados.\" custom=\"text-center\"/>\r\n                        </CSSTransition>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className={'mt-4 mt-lg-0 py-3 py-lg-0 col-md-12 col-lg album-photos-responsive ' + (openModal ? 'active' : null)}>\r\n                     \r\n                     <div className=\"position-relative d-flex flex-column rounded h-100 min-h-20\">\r\n                        <AlbumPhotos data={dataActive}/>\r\n                     </div>\r\n\r\n                  </div>\r\n\r\n                  <div className=\"btn-album-photos-responsive d-block d-lg-none\">\r\n                     <button type=\"button\" className=\"btn p-0 btn-primary rounded-circle align-middle\" onClick={() => setOpenModal(!openModal) }>\r\n                        <i className={'mt-1 bx ' + ( openModal ? 'bx-x' : 'bx-images')}></i>\r\n                     </button>\r\n                  </div>\r\n               </div>\r\n            </>\r\n\r\n            }\r\n   </div>\r\n}"],"names":["PhotoBox","item","id","title","url","thumbnailUrl","subStringLength","parsedNumberId","data","photos","setPhotos","useState","photosFil","setPhotosFil","datPart","setDatPart","datPags","setDatPags","initialPag","setInitialPag","then","dataArray","dataPags","createPagination","err","console","error","status","handleInitialPag","val","handleInputSearch","filter","toUpperCase","includes","length","map","elem","callback","active","currentIndex","UserGetContext","albums","setAlbums","albumsFil","setAlbumsFil","dataActive","setDataActive","openModal","setOpenModal","albumsData","getAlbumsUser","handleClickAlbumCard"],"mappings":"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"}